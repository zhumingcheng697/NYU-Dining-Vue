(function(e){function n(n){for(var o,r,a=n[0],c=n[1],u=n[2],d=0,f=[];d<a.length;d++)r=a[d],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&f.push(i[r][0]),i[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(n);while(f.length)f.shift()();return s.push.apply(s,u||[]),t()}function t(){for(var e,n=0;n<s.length;n++){for(var t=s[n],o=!0,a=1;a<t.length;a++){var c=t[a];0!==i[c]&&(o=!1)}o&&(s.splice(n--,1),e=r(r.s=t[0]))}return e}var o={},i={app:0},s=[];function r(n){if(o[n])return o[n].exports;var t=o[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,r),t.l=!0,t.exports}r.m=e,r.c=o,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="/NYU-Dining-Vue/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=n,a=a.slice();for(var u=0;u<a.length;u++)n(a[u]);var l=c;s.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"034f":function(e,n,t){"use strict";t("85ec")},"0d4d":function(e,n,t){},"2edf":function(e,n,t){"use strict";t("9db0")},"56d7":function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var o=t("2b0e"),i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"app"}},[t("h1",[e._v("NYU Dining Vue")]),e.locations&&!Array.isArray(e.locations)?t("h2",[e._v("Failed to Load Locations")]):e.locations?e.locations.length?t("div",[e.locations[e.showingIndex]?t("LocationModal",{attrs:{"location-info":e.locations[e.showingIndex],"menu-info":(e.menus[e.menuIndex(e.showingIndex)]||{})["menu"]},on:{keypress:e.handleModalKeyPress,"hide-location-modal":e.hideModal,"go-left":e.goLeft,"go-right":e.goRight}}):e._e(),t("div",{staticClass:"Locations"},e._l(e.locations,(function(n,o){return t("div",{key:n["id"]||o,staticClass:"LocationBlock",attrs:{tabindex:-1===e.showingIndex?0:-1},on:{keypress:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:e.hideModal(n)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:(n.preventDefault(),e.toggleLocation(o))}],click:function(n){return e.toggleLocation(o)}}},[t("LocationInfo",{attrs:{"location-info":n}})],1)})),0)],1):t("h2",[e._v("No Location Available")]):t("h2",[e._v("Loading Locations…")])])},s=[],r=(t("c740"),t("a434"),t("159b"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"LocationInfo"},[t("h2",[e._v(e._s(e.locationInfo["name"]||"Unknown Location"))]),t("strong",[e._v(e._s(e.address||"No Address Information"))]),e.schedules.length?e._l(e.schedules,(function(e,n){var o=e[0],i=e[1];return t("Schedule",{key:n,attrs:{days:o,sessions:i}})})):t("p",[e._v("No Schedule Information")])],2)}),a=[],c=t("3835"),u=(t("a15b"),t("4de4"),t("d81d"),t("4fad"),t("13d5"),t("fb6a"),function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("p",[e._v(e._s(e.daysStr)+": "+e._s(e.sessionsStr))])}),l=[],d=(t("1276"),t("ac1f"),t("99af"),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),f={name:"Schedule",props:{days:String,sessions:Array},computed:{daysStr:function(){var e=this.days.split(",").map((function(e){return d[e]}));return 1===e.length?e[0]:"".concat(e[0]," - ").concat(e[e.length-1])},sessionsStr:function(){return this.sessions.map((function(e){var n=e.start,t=e.end,o=function(e){return e>=0&&e<=11||24===e?"".concat(e%12===0?12:e%12,"AM"):e>=12&&e<=23?"".concat(e%12===0?12:e%12,"PM"):"".concat(e)};return"".concat(o(n)," - ").concat(o(t))})).join(", ")}}},h=f,p=(t("7125"),t("2877")),m=Object(p["a"])(h,u,l,!1,null,"4fc6ba6a",null),y=m.exports,g={name:"LocationInfo",props:{locationInfo:Object},components:{Schedule:y},computed:{address:function(){var e=this.locationInfo["address"]||{},n=e.street,t=e.city,o=e.state,i=e.zip_code;return[n,t,o].filter(Boolean).join(", ")+(i?" ".concat(i):"")},schedules:function(){return Object.entries((this.locationInfo["schedules"]||[]).filter((function(e){return"location"===e["type"]&&e["days"]&&Array.isArray(e["days"])&&e["days"].length&&e["start_hour"]&&e["end_hour"]})).reduce((function(e,n){var t=n["days"].slice().sort((function(e,n){return(0===e?7:e)-(0===n?7:n)})).join(",");return e[t]||(e[t]=[]),e[t].push({start:n["start_hour"],end:n["end_hour"]}),e}),{})).sort((function(e,n){return("0"===e[0]?"7":e[0])<("0"===n[0]?"7":n[0])?-1:("0"===e[0]?"7":e[0])>("0"===n[0]?"7":n[0])?1:0})).map((function(e){var n=Object(c["a"])(e,2),t=n[0],o=n[1];return[t,o.sort((function(e,n){var t=e.start,o=n.start;return t-o}))]}))}}},v=g,k=(t("2edf"),Object(p["a"])(v,r,a,!1,null,"f6ca9df2",null)),I=k.exports,_=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"ModalLayer"},[t("div",{staticClass:"Scrollable"},[t("div",{staticClass:"Centered",on:{click:e.clicked}},[t("div",{staticClass:"ModalContent",attrs:{"aria-modal":"true"}},[t("LocationInfo",{attrs:{"location-info":e.locationInfo}}),e.menuInfo&&!Array.isArray(e.menuInfo)?t("h3",[e._v("Failed to Load Menu")]):e.menuInfo?e.menuInfo.length?t("div",{staticClass:"Menus"},[t("h3",[e._v("Menu")]),e._l(e.menuInfo,(function(e,n){return t("Menu",{key:n,attrs:{"menu-item":e}})}))],2):t("h3",[e._v("No Menu Available")]):t("h3",[e._v("Loading Menu…")]),t("button",{staticClass:"ModalHideBtn",on:{click:function(n){return e.$emit("hide-location-modal")},keypress:[function(n){return n.preventDefault(),e.$emit("keypress",n)},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])&&e._k(n.keyCode,"enter",13,n.key,"Enter")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:(n.preventDefault(),e.$emit("hide-location-modal"))}]}},[e._v("×")])],1),t("div",{staticClass:"LeftRightBtnGroup"},[t("button",{staticClass:"LeftBtn LeftRightBtn",on:{click:function(n){return e.$emit("go-left")},keypress:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:(n.preventDefault(),e.$emit("hide-location-modal"))},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:(n.preventDefault(),e.$emit("go-left"))}]}},[e._v("<")]),t("button",{staticClass:"RightBtn LeftRightBtn",on:{click:function(n){return e.$emit("go-right")},keypress:[function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"esc",27,n.key,["Esc","Escape"])?null:(n.preventDefault(),e.$emit("hide-location-modal"))},function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")&&e._k(n.keyCode,"space",32,n.key,[" ","Spacebar"])?null:(n.preventDefault(),e.$emit("go-right"))}]}},[e._v(">")])])])])])},b=[],x=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"Menu"},[t("h4",[e._v(e._s(e.menuItem["name"]||"Unknown Dish"))]),e.menuItem["desc"]||e.menuItem["ingredients"]?t("p",{staticClass:"Description"},[e._v(e._s(e.menuItem["desc"]||e.menuItem["ingredients"]))]):e._e(),e.secondaryInfo?t("p",[e._v(e._s(e.secondaryInfo))]):e._e(),["desc","ingredients","calories","portion","qty"].some((function(n){return e.menuItem[n]}))?e._e():t("p",[e._v("No Dish Information")])])},L=[],w={name:"Menu",props:{menuItem:Object},computed:{secondaryInfo:function(){var e=[this.menuItem["portion"]||this.menuItem["qty"]];this.menuItem["calories"]&&e.push("".concat(this.menuItem["calories"]," Calories"));var n=e.filter(Boolean).join(" | ");return n&&n.charAt(0).toUpperCase()+n.slice(1)}}},M=w,C=(t("e26f"),Object(p["a"])(M,x,L,!1,null,"023746fa",null)),O=C.exports,j={name:"LocationModal",props:{locationInfo:Object,menuInfo:Array||Object},components:{LocationInfo:I,Menu:O},methods:{clicked:function(e){["ModalLayer","Scrollable","Centered"].some((function(n){return e.target.classList.contains(n)}))&&this.$emit("hide-location-modal")}}},S=j,$=(t("7970"),Object(p["a"])(S,_,b,!1,null,"0aa98a6f",null)),E=$.exports,A=t("a18f"),D="https://s3.amazonaws.com/mobile.nyu.edu/dining/locations.json",B=function(e){return"https://s3.amazonaws.com/mobile.nyu.edu/dining/menus/".concat(e,".json")},N={name:"App",data:function(){return{locations:null,menus:[],showingIndex:-1}},components:{LocationInfo:I,LocationModal:E},watch:{$route:function(e,n){var t=e.query.id,o=n.query.id;if(t!==o){var i=this.locationIndex(t);-1!==i?this.toggleLocationHelper(i):this.hideModalHelper()}}},methods:{toggleLocation:function(e){this.$router.push({query:{id:this.locations[e]["id"]}})},hideModal:function(){this.$router.push({query:{}})},toggleLocationHelper:function(e){this.showingIndex=this.showingIndex===e?-1:e,-1!==this.showingIndex&&(this.loadMenu(this.showingIndex),setTimeout((function(){document.activeElement.classList.contains("LeftRightBtn")||document.querySelector(".ModalHideBtn").focus()}),10))},hideModalHelper:function(){if(this.showingIndex>=0&&this.showingIndex<this.locations.length){var e=this.showingIndex+1;setTimeout((function(){document.querySelector(".Locations .LocationBlock:nth-child(".concat(e,")")).focus()}),10)}this.showingIndex=-1},handleModalKeyPress:function(e){switch(e.key){case"[":this.goLeft();break;case"]":this.goRight();break}},goLeft:function(){if(this.showingIndex>=0&&this.showingIndex<this.locations.length){var e=(this.showingIndex-1+this.locations.length)%this.locations.length;this.toggleLocation(e)}},goRight:function(){if(this.showingIndex>=0&&this.showingIndex<this.locations.length){var e=(this.showingIndex+1)%this.locations.length;this.toggleLocation(e)}},locationIndex:function(e){return this.locations.findIndex((function(n){return n.id===e}))},menuIndex:function(e){var n=this;return this.menus.findIndex((function(t){return t.id===(n.locations[e]||{})["id"]}))},loadMenu:function(e){var n=this;setTimeout((function(){if(n.showingIndex===e&&n.locations[e]){var t=n.locations[e]["id"];t&&-1===n.menuIndex(e)&&(n.menus.push({id:t}),A(B(t)).then((function(e){return e.text()})).then((function(o){try{n.menus.splice(n.menuIndex(e),1,{id:t,menu:JSON.parse("".concat(o))["menus"]}),n.menus[n.menuIndex(e)]["menu"].forEach((function(e){delete e["filters"],delete e["nutrients"]}))}catch(i){console.error(i),n.menus.splice(n.menuIndex(e),1,{id:t,menu:{}})}})))}}),500)}},created:function(){var e=this;A(D).then((function(e){return e.text()})).then((function(n){try{e.locations=JSON.parse("".concat(n));var t=e.$route.query.id;if(t){var o=e.locationIndex(t);-1!==o?e.toggleLocationHelper(o):e.hideModal()}}catch(i){console.error(i),e.locations={}}}))}},P=N,q=(t("034f"),Object(p["a"])(P,i,s,!1,null,null,null)),R=q.exports,T=t("8c4f");o["a"].use(T["a"]);var H=[{path:"/",component:R},{path:"*",redirect:"/"}],U=new T["a"]({mode:"history",base:"/NYU-Dining-Vue/",routes:H}),J=U;o["a"].config.productionTip=!1,new o["a"]({router:J,render:function(e){return e(R)}}).$mount("#app")},7125:function(e,n,t){"use strict";t("0d4d")},7970:function(e,n,t){"use strict";t("b7ad")},"85ec":function(e,n,t){},"97bb":function(e,n,t){},"9db0":function(e,n,t){},b7ad:function(e,n,t){},e26f:function(e,n,t){"use strict";t("97bb")}});
//# sourceMappingURL=app.aef48b5d.js.map